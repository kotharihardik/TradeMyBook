{"ast":null,"code":"var _jsxFileName = \"/Users/hardikkothari/Movies/book-exchange-platform/Frontend/src/components/requestManager.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useUserContext } from '../context/UserContext';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RequestManager = () => {\n  _s();\n  const {\n    user\n  } = useUserContext();\n  const [requests, setRequests] = useState([]);\n  const [newRequest, setNewRequest] = useState({\n    bookId: '',\n    ownerId: ''\n  });\n  useEffect(() => {\n    if (user) {\n      fetchRequests(user.uid);\n    }\n  }, [user]);\n  const fetchRequests = async userId => {\n    try {\n      const response = await axios.get(`http://localhost:4000/api/requests/${userId}`);\n      setRequests(response.data);\n    } catch (error) {\n      console.error(\"Error fetching requests:\", error);\n    }\n  };\n  const handleRequestChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setNewRequest(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleRequestSubmit = async e => {\n    e.preventDefault();\n    try {\n      await axios.post('http://localhost:4000/api/requests', {\n        requesterId: user.uid,\n        bookId: newRequest.bookId,\n        ownerId: newRequest.ownerId\n      });\n      fetchRequests(user.uid);\n      setNewRequest({\n        bookId: '',\n        ownerId: ''\n      });\n    } catch (error) {\n      console.error(\"Error sending request:\", error);\n    }\n  };\n  const handleStatusUpdate = async (requestId, status) => {\n    try {\n      await axios.patch(`http://localhost:4000/api/requests/${requestId}`, {\n        status\n      });\n      fetchRequests(user.uid);\n    } catch (error) {\n      console.error(\"Error updating request status:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Book Requests\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleRequestSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"bookId\",\n        value: newRequest.bookId,\n        onChange: handleRequestChange,\n        placeholder: \"Book ID\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"ownerId\",\n        value: newRequest.ownerId,\n        onChange: handleRequestChange,\n        placeholder: \"Owner ID\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Send Request\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Your Requests\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: requests.map(request => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [\"Book ID: \", request.bookId, \", Status: \", request.status, request.status === 'pending' && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleStatusUpdate(request.id, 'accepted'),\n          children: \"Accept\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 29\n        }, this), request.status === 'pending' && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleStatusUpdate(request.id, 'declined'),\n          children: \"Decline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 29\n        }, this)]\n      }, request.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n_s(RequestManager, \"sm6d1vyHiVJDuArN6vThtbj/Y8w=\", false, function () {\n  return [useUserContext];\n});\n_c = RequestManager;\nexport default RequestManager;\nvar _c;\n$RefreshReg$(_c, \"RequestManager\");","map":{"version":3,"names":["React","useEffect","useState","useUserContext","axios","jsxDEV","_jsxDEV","RequestManager","_s","user","requests","setRequests","newRequest","setNewRequest","bookId","ownerId","fetchRequests","uid","userId","response","get","data","error","console","handleRequestChange","e","name","value","target","prev","handleRequestSubmit","preventDefault","post","requesterId","handleStatusUpdate","requestId","status","patch","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","onChange","placeholder","required","type","map","request","onClick","id","_c","$RefreshReg$"],"sources":["/Users/hardikkothari/Movies/book-exchange-platform/Frontend/src/components/requestManager.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useUserContext } from '../context/UserContext';\nimport axios from 'axios';\n\nconst RequestManager = () => {\n    const { user } = useUserContext();\n    const [requests, setRequests] = useState([]);\n    const [newRequest, setNewRequest] = useState({ bookId: '', ownerId: '' });\n\n    useEffect(() => {\n        if (user) {\n            fetchRequests(user.uid);\n        }\n    }, [user]);\n\n    const fetchRequests = async (userId) => {\n        try {\n            const response = await axios.get(`http://localhost:4000/api/requests/${userId}`);\n            setRequests(response.data);\n        } catch (error) {\n            console.error(\"Error fetching requests:\", error);\n        }\n    };\n\n    const handleRequestChange = (e) => {\n        const { name, value } = e.target;\n        setNewRequest(prev => ({ ...prev, [name]: value }));\n    };\n\n    const handleRequestSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            await axios.post('http://localhost:4000/api/requests', { \n                requesterId: user.uid, \n                bookId: newRequest.bookId, \n                ownerId: newRequest.ownerId \n            });\n            fetchRequests(user.uid);\n            setNewRequest({ bookId: '', ownerId: '' });\n        } catch (error) {\n            console.error(\"Error sending request:\", error);\n        }\n    };\n\n    const handleStatusUpdate = async (requestId, status) => {\n        try {\n            await axios.patch(`http://localhost:4000/api/requests/${requestId}`, { status });\n            fetchRequests(user.uid);\n        } catch (error) {\n            console.error(\"Error updating request status:\", error);\n        }\n    };\n\n    return (\n        <div>\n            <h2>Book Requests</h2>\n            <form onSubmit={handleRequestSubmit}>\n                <input\n                    name=\"bookId\"\n                    value={newRequest.bookId}\n                    onChange={handleRequestChange}\n                    placeholder=\"Book ID\"\n                    required\n                />\n                <input\n                    name=\"ownerId\"\n                    value={newRequest.ownerId}\n                    onChange={handleRequestChange}\n                    placeholder=\"Owner ID\"\n                    required\n                />\n                <button type=\"submit\">Send Request</button>\n            </form>\n\n            <h3>Your Requests</h3>\n            <ul>\n                {requests.map(request => (\n                    <li key={request.id}>\n                        Book ID: {request.bookId}, Status: {request.status}\n                        {request.status === 'pending' && (\n                            <button onClick={() => handleStatusUpdate(request.id, 'accepted')}>Accept</button>\n                        )}\n                        {request.status === 'pending' && (\n                            <button onClick={() => handleStatusUpdate(request.id, 'declined')}>Decline</button>\n                        )}\n                    </li>\n                ))}\n            </ul>\n        </div>\n    );\n};\n\nexport default RequestManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}